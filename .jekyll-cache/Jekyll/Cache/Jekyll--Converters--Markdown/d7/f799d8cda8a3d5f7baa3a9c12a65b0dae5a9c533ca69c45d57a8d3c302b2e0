I"õ<h2 id="schnittstelle-zu-mesonic">Schnittstelle zu Mesonic</h2>

<p>Die letzte Wochen stand im Zeichen der ersten Schnittstelle. Es geht um
die Anbindung an das ERP-System Mesonic (<a href="http://www.mesonic.at/">http://www.mesonic.at/</a>), das
von zwei Referenzkunden und von einigen potentiellen Kunden eingesetzt
wird, da Ivellio-Vellin auch Vertriebspartner von Mesonic ist. Diese
Schnittstelle besteht im Kern aus einer Schnittstelle zu einem Microsoft
SQL Server 2013.</p>

<p>Obwohl wir die Nomenklatur der Datenbankstruktur kennen - die Benennung
von Tabellen und Spalten ist nicht sprechend - ben√∂tigen wir zun√§chst
einen komfortablen Datenbankbrowser, den wir uns als getrennte Hobo
Applikation generieren. Dies gelingt innerhalb zweier Tage, womit wir
sicher sind, dass wir die Schnittstelle zur Datenbank implementieren
k√∂nnen, in der wir nur auf etwa 10 Tabellen zugreifen werden. Die
generierte Applikation greift auf alle Spalten aller Tabellen des ERP zu
und zeigt dabei keine Performance Probleme.</p>

<p>Die Testsysteme auf den Rechnern der Entwickler befindet sich zwei
SSH-Tunnel und damit drei Network-Hops vom Datenbankserver entfernt, die
Daten√ºbertragung ist dennoch ausreichend schnell, die Latenz gering
genug. Produktivstysteme werden sich stets nur einen Hop vom
Datenbankserver des ERP-Systems entfernt befinden, damit wird die Latenz
grob gedrittelt.</p>

<p>Wir haben kleine Probleme mit der automatischen Generierung der
Datenbankmigrationen von Hobo erlebt, konnten diese aber ohne fremde
Hilfe durch lesen des Quellcodes beheben. Hier kam uns die Open Source
Lizenz und Natur von Hobo zu Gute.</p>

<p>Es geht nun in Folge an die Implementierung der Schnittstelle in die
Applikation. Zielsetzung ist, die Schnittstelle so modular zu gestalten,
dass sie nicht nur ein- und ausgeschaltet werden kann, sondern, dass sie
nicht mal installiert werden muss, sollte ein anderes ERP-System
eingebunden werden. Dazu gibt es in Ruby on Rails das Konzept der
Engines, das sind im Prinzip eigenst√§ndige Applikationen, die sich in
eine Applikation einklinken lassen. Leichte Sorge bereitet uns, dass
Hobo zwar selbst eine Engine darstellt, die Einbindung weiterer Engines
aber in der Dokumentation aber nicht erw√§hnt wird.</p>

<p>In weiterer Folge sind diese Engines in sogenannte Gems verpackbar,
vielleicht am besten als Softwarepaket beschreibbar. Diese Gems lassen
sich dann einfach etwa auf den Plattformen Rubygems und Github
publizieren und auf Servern installieren. Dabei werden
Versionsabh√§ngigkeiten √ºberpr√ºft.</p>

<p>Wir machen also jetzt den Sprung von der Entwicklung einer relativ
gro√üen, aber doch einzelnen Applikation, in die einer Software- und
Servicearchitektur aus Anwendung und Gems. Unsere Gems werden aber nicht
als eigenst√§ndige Services lauff√§hig sein, dieser Aufwand rechnet sich
f√ºr uns nicht.</p>

<h2 id="cobrowsing">Cobrowsing</h2>

<p>Auch an anderen Stellen geht die Entwicklung weiter, das Cobrowsing
erfolgt nun f√ºr den Benutzer weniger aufdringlich, in dem eine Animation
den Darstellungsbereich fl√ºssig ein- und ausblendet.</p>

<p>Wir arbeiten daran, die Beratungssituation f√ºr den Benutzer angenehmer
zu machen: Zum Beispiel mit einem Photo des Beraters. Bei der
Implementierung sind wir auf einen Bug in der Codegenerierung Hobos f√ºr
Sidebars gesto√üen, den wir eingemeldet haben. Wir m√ºssen nicht auf eine
Behebung warten, da wir mit dem Debugging auch sofort einen Workaround
gefunden haben, der vermutlich in die Codebasis von Hobo einflie√üen
wird.</p>

<h2 id="rabatte">Rabatte</h2>

<p>Bestellpositionen haben nun einen Positionsrabatt, der aus dem Rabatt
der Angebotsposition ermittelt wird. F√ºr Komplettangebote gibt es auch
einen Kopfrabatt. Zu kl√§ren ist hier noch das Verhalten bei Kopie in
eine Bestellung.</p>

<p>Der Kunde kann nun die Lieferart vor der Zahlungsart ausw√§hlen. - Sie
steht bei ihm im Vordergrund. Die Versandspesen wurden nicht immer
korrekt ermittelt, dieses Fehlverhalten ist nun behoben.</p>

<p>Die Pflege seiner Adressen wunde f√ºr den Kunden nun deutlich
vereinfacht, er hat eine √ºbersichtliche Darstellung aller seiner
Adressen in seinem Benutzerprofil.</p>

<h2 id="upselling">Upselling</h2>

<p>Im Warenkorb besteht nun f√ºr den Kunden eine einfache M√∂glichkeit des
Upsellings: Jeder Artikel, f√ºr den passendes Zubeh√∂r bestellt werden
kann, hat im Warenkorb einen Button, √ºber den dieses Zubeh√∂r ohne
Seitenwechsel eingeblendet und auch unmittelbar bestellt werden kann.</p>

<h2 id="komponenten">Komponenten</h2>

<p>Wir haben im Zuge dieser Besprechung einen Blick auf die aktuelle
Architektur von Mercator geworfen. Die Anzahl der verwendeten
Technologien, Sprachen, Bibliotheken und Services hat uns selbst
√ºberrascht.</p>

<h3 id="architekturdiagramm">Architekturdiagramm</h3>

<p>Um den √úberblick zu behalten, die Darstellung in Form eines Diagramms:</p>

<hr />

<p><img src="/img/blog/Mercator_Architektur.png" alt="Mercator Architektur" style="max-width: 100%" /></p>
<hr />

:ET