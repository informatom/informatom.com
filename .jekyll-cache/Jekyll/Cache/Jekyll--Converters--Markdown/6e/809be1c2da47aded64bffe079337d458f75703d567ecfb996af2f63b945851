I"…<p>Zugegeben, die Formulierung ist √ºbertrieben, aber Mercator wird
nun von einer Suchmaschine beschleunigt:</p>

<h2 id="facettet-search-mit-elastic-search">Facettet Search mit Elastic Search</h2>

<hr />

<p><img src="/img/blog/facetted_search.png" alt="Facetted Search" style="max-width: 100%" /></p>
<hr />

<p>Wir verwenden die lokal installierte Suchmaschine Elastic Search um eine
schnelle Filterung von Artikeln nach Produkteigenschaften zu
erm√∂glichen. Auf Ruby On Rails Seite verbinden wir die zu indizierenden
Modelle mit der Bibliothek Searchkick mit Elasticsearch. Wir indizieren
zu jedem Produkt aus den Tabellen der Produkteigenschaften und der Werte
die entsprechenden Auspr√§gungen der Daten in einen Index.</p>

<p>Parallel dazu merken wir uns pro Kategorie die Namen aller Eigenschaften
aller Artikel der Gruppe und die Namen der zugeh√∂rigen
Eigenschaftsgruppen.</p>

<p>Navigiert nun ein Kunde in eine Kategorie des Produktkataloges ermitteln
wir aus dem Index in Elasticsearch alle Auspr√§gungen (d.h. alle
unterschiedlichen auftretenden Werte) aller Eigenschaften der Artikel
dieser Gruppe und die Anzahl (absolute H√§ufigkeiten). Die Werte k√∂nnen
dann vom Kunden angeklickt werden, um nach diesen zu Filtern.</p>

<p>Damit wird die Darstellung auf Artikel mit diesem Wert eingeschr√§nkt.
Ebenso wird die Darstellung der Filter auf diese Produkte passend
eingeschr√§nkt. Filter k√∂nnen beliebig hinzugef√ºgt und entfernt werden.
Da sie ausschlie√ülich im URL des GET-Requests gespeichert werden, k√∂nnen
die Links weiterhin als Lesezeichen verwendet und zum Beispiel per
E-Mail versandt werden. Diese Art der Filterung bezeichnet man als
Facetted Search.</p>

<p>Dieser komplex zu beschreibende Vorgang l√§uft in rund f√ºnf Millisekunden
ab und verz√∂gert die Ladezeit daher kaum (die Darstellung der Filter als
HTML ben√∂tigt l√§nger als die Suche in Elasticsearch).</p>

<p>Produkte werden automatisch mit jeder √Ñnderung in der Mercator Datenbank
in Elastic Search aktualisiert, die Indizierung der Kategorien erfolgt
per Cronjob nach jedem Produktupdate aus dem ERP-System.</p>

<h2 id="bestellprozess">Bestellprozess</h2>

<p>Bei dieser Besprechung haben wir den Bestellprozess rekapituliert. Er
sieht in Diagrammform so aus:</p>

<hr />

<p><img src="/img/blog/Mercator_Prozess.png" alt="Mercator Prozess" style="max-width: 100%" /></p>
<hr />

<h2 id="weiteres">Weiteres</h2>

<ul>
  <li>Wir haben recherchiert, in wieweit wir mobile Endger√§te als Pager
f√ºr neu hereinkommende Kundenanfragen verwenden k√∂nnen.</li>
  <li>Einige kleinere Arbeiten f√ºr die Icecat Schnittstelle sind noch
angefallen, eventuell werden wir noch unseres selbst geschriebenen
Mini-Parser f√ºr die korrupten UTF8 Unicode Zeichen durch eine
Fremdbibliothek ersetzen.</li>
  <li>Wir haben den Produktkatalog f√ºr den ersten Referenzkunden um die
bislang fehlenden Bilder aus Icecat erg√§nzt.</li>
  <li>Wir n√ºtzen nun die Informationen in Icecat √ºber √§hnliche Produkte
und Zuberh√∂rrelationen.</li>
</ul>
:ET